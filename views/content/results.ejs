<h1>ðŸŽµ Your Spotify Liked Songs</h1>
<div class="stats">
  Total Songs: <strong><%= songs.length %></strong>
</div>
<p class="subtitle">Exported on <%= exportDate %></p>

<div class="download-section">
  <a href="/download/txt" class="download-btn" download>ðŸ“„ Download TXT</a>
  <a href="/download/csv" class="download-btn" download>ðŸ“Š Download CSV</a>
  <a href="/download/detailed" class="download-btn" download>ðŸ“‹ Download Detailed</a>
  <a href="/download/uris" class="download-btn" download>ðŸ”— Download URIs</a>
</div>

<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th class="sortable">
          <a href="/results?sortBy=track&sortOrder=<%= (currentSort.by === 'track' && currentSort.order === 'asc') ? 'desc' : 'asc' %>">
            Track Name
            <span class="sort-icon">
              <% if (currentSort.by === 'track') { %>
                <% if (currentSort.order === 'asc') { %>
                  â–²
                <% } else { %>
                  â–¼
                <% } %>
              <% } else { %>
                â‡…
              <% } %>
            </span>
          </a>
        </th>
        <th class="sortable">
          <a href="/results?sortBy=album&sortOrder=<%= (currentSort.by === 'album' && currentSort.order === 'asc') ? 'desc' : 'asc' %>">
            Album
            <span class="sort-icon">
              <% if (currentSort.by === 'album') { %>
                <% if (currentSort.order === 'asc') { %>
                  â–²
                <% } else { %>
                  â–¼
                <% } %>
              <% } else { %>
                â‡…
              <% } %>
            </span>
          </a>
        </th>
        <th class="sortable">
          <a href="/results?sortBy=artist&sortOrder=<%= (currentSort.by === 'artist' && currentSort.order === 'asc') ? 'desc' : 'asc' %>">
            Artist(s)
            <span class="sort-icon">
              <% if (currentSort.by === 'artist') { %>
                <% if (currentSort.order === 'asc') { %>
                  â–²
                <% } else { %>
                  â–¼
                <% } %>
              <% } else { %>
                â‡…
              <% } %>
            </span>
          </a>
        </th>
      </tr>
    </thead>
    <tbody>
      <% songs.forEach((item, index) => { %>
        <% const track = item.track; %>
        <% const artists = track.artists.map(artist => artist.name).join(', '); %>
        <tr>
          <td><%= index + 1 %></td>
          <td><%= track.name %></td>
          <td><%= track.album.name %></td>
          <td><%= artists %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>

