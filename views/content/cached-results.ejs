<div id="loading-message" style="text-align: center; padding: 40px;">
  <div class="spinner" style="margin: 0 auto;"></div>
  <p style="margin-top: 20px; color: #666;">Loading cached songs...</p>
</div>

<div id="results-content" style="display: none;">
  <h1>ğŸµ Your Spotify Liked Songs</h1>
  <div class="stats">
    Total Songs: <strong id="song-count">0</strong>
    <span class="cache-status-badge cached">ğŸ’¾ From Cache</span>
  </div>
  <p class="subtitle" id="export-date"></p>
  
  <div class="action-buttons" style="margin-bottom: 20px;">
    <button class="start-btn" onclick="refreshData()" style="margin-right: 10px;">
      ğŸ”„ Refresh Data
    </button>
    <button class="start-btn secondary-btn" onclick="clearCacheAndRefresh()">
      ğŸ—‘ï¸ Clear Cache
    </button>
  </div>
  
  <div class="download-section">
    <a href="#" class="download-btn" onclick="downloadAsFormat('txt')" download>ğŸ“„ Download TXT</a>
    <a href="#" class="download-btn" onclick="downloadAsFormat('csv')" download>ğŸ“Š Download CSV</a>
    <a href="#" class="download-btn" onclick="downloadAsFormat('detailed')" download>ğŸ“‹ Download Detailed</a>
    <a href="#" class="download-btn" onclick="downloadAsFormat('uris')" download>ğŸ”— Download URIs</a>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th class="sortable" onclick="sortTable('track')">
            Track Name
            <span class="sort-icon">â‡…</span>
          </th>
          <th class="sortable" onclick="sortTable('album')">
            Album
            <span class="sort-icon">â‡…</span>
          </th>
          <th class="sortable" onclick="sortTable('artist')">
            Artist(s)
            <span class="sort-icon">â‡…</span>
          </th>
          <th>
            Download
          </th>
        </tr>
      </thead>
      <tbody id="songs-table-body">
        <!-- Songs will be inserted here by JavaScript -->
      </tbody>
    </table>
  </div>
</div>

<div id="error-message" style="display: none; text-align: center; padding: 40px;">
  <h2 style="color: #ff0000;">âŒ No Cached Data Found</h2>
  <p style="color: #666; margin: 20px 0;">You haven't fetched any songs yet.</p>
  <button class="start-btn" onclick="window.location.href='/'">
    ğŸµ Fetch Songs Now
  </button>
</div>

<script>
  function refreshData() {
    window.location.href = '/';
  }
  
  function clearCacheAndRefresh() {
    if (confirm('Are you sure you want to clear the cache?')) {
      clearCache();
      window.location.href = '/';
    }
  }
  
  function downloadAsFormat(format) {
    // This would need to be implemented to work with cached data
    // For now, redirect to the server endpoint
    alert('To download files, please refresh your data from Spotify first.');
  }
  
  function sortTable(column) {
    // Sorting will be implemented in load-cached.js
    console.log('Sort by:', column);
  }
</script>

