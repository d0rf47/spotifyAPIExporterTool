# ğŸµ Spotify Liked Songs Exporter

A beautiful, modern web application to export all your Spotify "Liked Songs" with a single click. No credentials needed from users - just authenticate and export!

![Version](https://img.shields.io/badge/version-2.0.0-green.svg)
![Node](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)
![License](https://img.shields.io/badge/license-ISC-blue.svg)

## âœ¨ Features

### ğŸ¨ Beautiful Web Interface
- **Modern UI** - Clean, Spotify-themed design with gradient backgrounds
- **Interactive Table** - View all your songs in a beautiful, scrollable, sortable table
- **Column Sorting** - Click any column header to sort by track name, album, or artist
- **Responsive Design** - Works perfectly on desktop and mobile devices
- **Real-time Progress** - Live updates as songs are being fetched

### ğŸ” Secure Authentication
- **PKCE Flow** - Industry-standard OAuth 2.0 with PKCE (Proof Key for Code Exchange)
- **No Credentials Needed** - Users don't need their own Spotify API keys
- **One-Click Auth** - Simple Spotify login, that's it!
- **User-Initiated Export** - You control when to start fetching your songs

### ğŸ“Š Multiple Export Formats
- **ğŸ“„ Simple TXT** - Clean list format (Track - Artist) âœ… Always works
- **ğŸ“‹ Detailed TXT** - Complete information (album, duration, release date, popularity) âœ… Always works
- **ğŸ“Š CSV** - Spreadsheet-compatible for data analysis âœ… Always works
- **ğŸ”— Spotify URIs** - Track URIs for playlist import âœ… Always works
- **ğŸµ Individual MP3 Downloads** - Experimental feature, may not work due to YouTube restrictions âš ï¸

### âš¡ Performance & Reliability
- **Smart Pagination** - Handles libraries of any size (100, 1,000, 10,000+ songs)
- **Rate Limiting Protection** - Polite delays to respect Spotify's API limits
- **Progress Indicators** - See exactly what's happening at each step
- **Error Handling** - Clear, helpful error messages

### ğŸ—ï¸ Professional Architecture
- **EJS Templates** - Clean, component-based views
- **Modular Structure** - Organized routes, utilities, and views
- **Reusable Components** - Header and footer partials for consistency
- **Centralized Styling** - All CSS in one maintainable file

## ğŸš€ Quick Start

### Prerequisites
- Node.js 18+ installed
- A Spotify account
- A Spotify Developer App (one-time setup)
- **Optional:** FFMPEG (for MP3 download feature)

### Installation

1. **Clone or download this repository**
   ```bash
   git clone <your-repo-url>
   cd SpotifyAPItool
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Configure Spotify App** (One-time setup)
   
   a. Go to [Spotify Developer Dashboard](https://developer.spotify.com/dashboard)
   
   b. Click "Create an App"
   
   c. Fill in:
      - App name: `Spotify Liked Songs Exporter`
      - App description: `Export liked songs to various formats`
      - Redirect URI: `http://127.0.0.1:8888/callback`
   
   d. Copy your **Client ID**
   
   e. Update `config/config.js`:
   ```javascript
   spotify: {
     clientId: 'YOUR_CLIENT_ID_HERE',  // â† Paste your Client ID here
     // ...
   }
   ```

4. **(Optional) Setup FFMPEG for MP3 Downloads**
   
   If you want to download individual songs as MP3 files:
   
   a. Install FFMPEG (see [FFMPEG_SETUP.md](FFMPEG_SETUP.md) for detailed instructions)
   
   b. Create a `.env` file in the project root:
   ```env
   FFMPEG_PATH=ffmpeg
   ```
   
   c. See [ENV_SETUP_INSTRUCTIONS.txt](ENV_SETUP_INSTRUCTIONS.txt) for detailed .env setup
   
   > **Note:** You can skip this step if you only want to export song lists (TXT/CSV formats)

5. **Run the application**
   ```bash
   npm start
   ```

6. **Use the app!**
   - Browser opens automatically
   - Login with your Spotify account
   - Click "Start Export" button
   - View your songs in a beautiful, sortable table
   - Download in your preferred format
   - **(Optional)** Click ğŸµ MP3 on any song to download it

## ğŸ“– Usage

### Step-by-Step Guide

1. **Start the app**
   ```bash
   npm start
   ```

2. **Authenticate**
   - Browser opens to Spotify login
   - Grant permissions to read your liked songs
   - You'll see "Authentication Successful!"

3. **Start Export**
   - Click the green "Start Export" button
   - Wait while songs are fetched (progress shown)

4. **View Results**
   - See all your songs in an interactive table
   - Scroll through your entire library
   - Sort and browse easily

5. **Sort and Browse**
   - Click column headers to sort by track name, album, or artist
   - Toggle between ascending and descending order
   - All sorting happens instantly (no re-fetching)

6. **Download**
   - **Bulk Export** - Choose your preferred format:
     - ğŸ“„ **TXT** - Simple text list
     - ğŸ“Š **CSV** - Excel/spreadsheet format
     - ğŸ“‹ **Detailed** - Complete song information
     - ğŸ”— **URIs** - Spotify track URIs
   - **Individual Songs** - Click ğŸµ MP3 on any song row to download that song as MP3

## ğŸ—ï¸ Project Structure

```
SpotifyAPItool/
â”œâ”€â”€ config/              # Application configuration
â”‚   â””â”€â”€ config.js        # Spotify Client ID, server settings
â”‚
â”œâ”€â”€ routes/              # Express route handlers
â”‚   â”œâ”€â”€ auth.js          # Authentication & PKCE flow
â”‚   â”œâ”€â”€ api.js           # API endpoints (loading, results)
â”‚   â””â”€â”€ downloads.js     # File download handlers
â”‚
â”œâ”€â”€ views/               # EJS templates
â”‚   â”œâ”€â”€ partials/        # Reusable components
â”‚   â”‚   â”œâ”€â”€ header.ejs   # Common header
â”‚   â”‚   â””â”€â”€ footer.ejs   # Common footer
â”‚   â”œâ”€â”€ success.ejs      # Auth success page
â”‚   â”œâ”€â”€ loading.ejs      # Loading page with spinner
â”‚   â””â”€â”€ results.ejs      # Results table
â”‚
â”œâ”€â”€ public/              # Static assets
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ styles.css   # Centralized stylesheet
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ loading.js   # Loading page JavaScript
â”‚
â”œâ”€â”€ utils/               # Helper functions
â”‚   â”œâ”€â”€ pkce.js          # PKCE authentication helpers
â”‚   â”œâ”€â”€ spotify.js       # Spotify API utilities
â”‚   â”œâ”€â”€ formatters.js    # Export format generators
â”‚   â””â”€â”€ youtube-downloader.js  # YouTube MP3 download utilities
â”‚
â””â”€â”€ server.js            # Main application entry point
```

## ğŸ¨ Customization

### Change Colors

Edit `public/css/styles.css`:

```css
/* Find and replace #1DB954 (Spotify green) with your color */
h1 {
  color: #1DB954;  /* Your color here */
}
```

### Modify Page Content

Edit EJS templates in `views/`:
- `success.ejs` - Authentication success page
- `loading.ejs` - Loading page
- `results.ejs` - Results table
- `error.ejs` - Error page

### Add New Export Formats

1. Add formatter in `utils/formatters.js`
2. Add route in `routes/downloads.js`
3. Add button in `views/results.ejs`

See `PROJECT_STRUCTURE.md` for detailed guidance.

## ğŸ”§ Configuration

### FFMPEG Settings (for MP3 Downloads)

Create a `.env` file in the project root:

```env
# Path to FFMPEG binary
FFMPEG_PATH=ffmpeg

# Optional: Custom downloads directory
# DOWNLOADS_PATH=./downloads
```

**See [FFMPEG_SETUP.md](FFMPEG_SETUP.md) for complete FFMPEG installation and configuration guide.**

### Server Settings

Edit `config/config.js`:

```javascript
server: {
  port: 8888,        // Change server port
  host: '127.0.0.1'  // Change host
}
```

### Fetch Settings

```javascript
fetch: {
  limit: 50,    // Songs per request (max 50)
  delayMs: 100  // Delay between requests (ms)
}
```

## ğŸ“š Documentation

- **`PROJECT_STRUCTURE.md`** - Complete project documentation
- **`EJS_GUIDE.md`** - EJS templates reference
- **`EJS_PARTIALS_GUIDE.md`** - Reusable components guide
- **`LAYOUT_SYSTEM.md`** - Unified layout system documentation
- **`FFMPEG_SETUP.md`** - FFMPEG installation and setup guide
- **`ENV_SETUP_INSTRUCTIONS.txt`** - .env file configuration instructions
- **`YTDL_MP3_USAGE.md`** - ytdl-mp3 correct usage guide âœ¨
- **`YOUTUBE_403_ISSUE.md`** - YouTube download limitations and alternatives âš ï¸

## ğŸ› ï¸ Development

### Run in Development Mode

```bash
npm run dev
```

Auto-reloads on file changes using nodemon.

### Project Commands

```bash
npm start       # Start production server
npm run dev     # Start development server with auto-reload
```

## â“ Troubleshooting

### "Client ID not configured"
- Update `config/config.js` with your Spotify Client ID
- Make sure you created an app in Spotify Developer Dashboard

### "Invalid redirect URI"
- Add `http://127.0.0.1:8888/callback` to your Spotify app's redirect URIs
- Use `127.0.0.1` (not `localhost`)

### Songs not loading
- Check console for error messages
- Verify authentication was successful
- Try clicking "Start Export" again

### Port already in use
- Change the port in `config/config.js`
- Or stop the process using port 8888

### MP3 Download not working (403 errors)
- **This is a known limitation** - YouTube blocks automated downloads
- See [YOUTUBE_403_ISSUE.md](YOUTUBE_403_ISSUE.md) for detailed explanation
- **Recommended:** Use export features (TXT/CSV) and download songs manually
- Make sure FFMPEG is installed: `ffmpeg -version`
- Check your `.env` file has correct FFMPEG_PATH
- Try different videos - some may work while others don't
- See [FFMPEG_SETUP.md](FFMPEG_SETUP.md) for setup help

## ğŸ”’ Privacy & Security

- âœ… **No data stored** - Songs are fetched in memory only
- âœ… **No third-party servers** - Everything runs locally
- âœ… **No tracking** - Your data stays with you
- âœ… **Open source** - See exactly what the code does
- âœ… **PKCE authentication** - No client secret needed (more secure)

## ğŸ¯ Technical Stack

- **Backend:** Node.js, Express.js
- **Templating:** EJS (Embedded JavaScript) with unified layout system
- **Styling:** Pure CSS (no frameworks)
- **API:** Spotify Web API Node.js wrapper
- **Auth:** OAuth 2.0 with PKCE
- **MP3 Downloads:** ytdl-mp3 with built-in conversion
- **Config:** dotenv for environment variables

## ğŸ“ Export Format Examples

### Simple Format
```
1. Song Name - Artist Name
2. Another Song - Another Artist
...
```

### Detailed Format
```
1.
   Track: Song Name
   Artist(s): Artist Name
   Album: Album Name
   Release Date: 2023-01-01
   Duration: 3:45
   Popularity: 85/100
```

### CSV Format
```csv
Track Name,Artist(s),Album,Release Date,Duration,Popularity,Spotify URL
"Song Name","Artist Name","Album Name",2023-01-01,3:45,85,https://...
```

### Spotify URI Format
```
spotify:track:xxxxxxxxxxxxxxxxxxxx
spotify:track:yyyyyyyyyyyyyyyyyyyy
```

## ğŸ¤ Contributing

Contributions are welcome! Feel free to:
- Report bugs
- Suggest new features
- Submit pull requests
- Improve documentation

## ğŸ“„ License

ISC License - see LICENSE file for details

## ğŸ™ Acknowledgments

- Built with [Spotify Web API](https://developer.spotify.com/documentation/web-api/)
- Uses [spotify-web-api-node](https://github.com/thelinmichael/spotify-web-api-node)
- Inspired by the need to back up and analyze Spotify libraries

## ğŸ“§ Support

- Open an issue for bugs or feature requests
- Check `PROJECT_STRUCTURE.md` for detailed documentation
- Review `EJS_GUIDE.md` for template customization

---

**Made with ğŸµ and â¤ï¸ for music lovers**

*Star â­ this repo if you find it useful!*
